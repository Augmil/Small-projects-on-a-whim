<!--DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Easy Shuttle</title>
    <link rel="stylesheet" href="./style/default theme light/index.css" type="text/css">
</head>

<body>
    <h1>欢迎使用 Easy Shuttle </h1>
    <button>进入设置</button>
    <button>打开搜索页</button>
    <script src="./script/index.js"></script>
    <script>
        /**
         * 正则表达式判断网址是否有效
         */

        (function () {
            "use strict";


            // 建议的正则
            function isURL(str) {
                return !!str.match(/(((^https?:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)$/g);
            }

            // 不知道谁写的简单版的坑爹正则
            function badRegFn(str) {
                return !!str.match(/(http[s]?|ftp):\/\/[^\/\.]+?\..+\w$/g);
            }
            //jb51
            function IsURL(str_url) {
                var strRegex = "^((https|http|ftp|rtsp|mms)?://)"
                    + "?(([0-9a-z_!~*'().&=+$%-]+: )?[0-9a-z_!~*'().&=+$%-]+@)?" //ftp的user@ 
                    + "(([0-9]{1,3}\.){3}[0-9]{1,3}" // IP形式的URL- 199.194.52.184 
                    + "|" // 允许IP和DOMAIN（域名）
                    + "([0-9a-z_!~*'()-]+\.)*" // 域名- www. 
                    + "([0-9a-z][0-9a-z-]{0,61})?[0-9a-z]\." // 二级域名 
                    + "[a-z]{2,6})" // first level domain- .com or .museum 
                    + "(:[0-9]{1,4})?" // 端口- :80 
                    + "((/?)|" // a slash isn't required if there is no file name 
                    + "(/[0-9a-z_!~*'().;?:@&=+$,%#-]+)+/?)$";
                var re = new RegExp(strRegex);
                //re.test()
                if (re.test(str_url)) {
                    return (true);
                } else {
                    return (false);
                }
            }



        }());


        //正则测试函数
        let testReg = (reg) => {
            var urlDict = [
                //Bad Case
                '1.2',                //错误域名
                ' WWWW ',              //无效字符串
                '111测试',              //无效字符串
                '测试.com',              //非常规合法网址，中文域名不在参考之列

                'www.baidu.com',           //常规网址，未带协议头的地址
                'w.baidu.com',            //常规网址，短子域名
                'baidu.com',             //常规网址，仅有主域名
                //Correct Case
                'http://baidu.com',          //常规网址，仅有主域名
                'http://www.baidu.com',        //常规网址，带子域名
                'https://www.baidu.com/',       //常规网址，使用https协议头，带根目录
                'http://www.baidu.com/api',      //常规网址，有一级目录下资源
                'http://www.subdomain.baidu.com/index/subdir',   //常规网址，多级子域名，多级目录
                'http://www.www.subdomain.baidu.com/index/subdir/',//常规网址，多级子域名，多级目录，目录地址闭合
                'http://io.io'            //非常规网址，多级子域名，多级目录，目录地址闭合
            ];
            let isURL = (url) => {
                return reg.test(url);
            }

            console.log(reg)
            for (let i = 0; i < urlDict.length; i++) {
                console.log(urlDict[i], isURL(urlDict[i]));
            }
            console.log('浏览器会自动标识出链接，对比判断结果和浏览器标识是否统一')
        }

        //testReg(/(((^https?:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)$/g)
        testReg(/^((https|http|ftp|rtsp|mms)?:\/\/)?(([0-9a-z_!~*'().&=+$%-]+: )?[0-9a-z_!~*'().&=+$%-]+@)?(([0-9]{1,3}.){3}[0-9]{1,3}|([0-9a-z_!~*'()-]+.)*([0-9a-z][0-9a-z-]{0,61})?[0-9a-z].[a-z]{2,6})(:[0-9]{1,4})?((\/?)|(\/[0-9a-z_!~*'().;?:@&=+$,%#-]+)+\/?)$/);
        testReg(
            new RegExp("^((https|http|ftp|rtsp|mms)?://)"
                + "?(([0-9a-z_!~*'().&=+$%-]+: )?[0-9a-z_!~*'().&=+$%-]+@)?" //ftp的user@ 
                + "(([0-9]{1,3}\.){3}[0-9]{1,3}" // IP形式的URL- 199.194.52.184 
                + "|" // 允许IP和DOMAIN（域名）
                + "([0-9a-z_!~*'()-]+\.)*" // 域名- www. 
                + "([0-9a-z][0-9a-z-]{0,61})?[0-9a-z]\." // 二级域名 
                + "[a-z]{2,6})" // first level domain- .com or .museum 
                + "(:[0-9]{1,4})?" // 端口- :80 
                + "((/?)|" // a slash isn't required if there is no file name 
                + "(/[0-9a-z_!~*'().;?:@&=+$,%#-]+)+/?)$")
        )

    </script>
</body>

</html-->


<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Read Image</title>
    <style>
        #dropBox {
            margin: 15px;
            width: 250px;
            height: 250px;
            border: 5px dashed gray;
            border-radius: 8px;
            background: lightyellow;
            background-size: 100%;
            background-repeat: no-repeat;
            text-align: center;
        }

        #dropBox div {
            margin: 75px 45px;
            color: orange;
            font-size: 25px;
            font-family: Verdana, Arial, sans-serif;
        }

        input {
            margin: 15px;
        }
    </style>

    <!--script>
        var dropBox;

        window.onload = function () {
            dropBox = document.getElementById("dropBox");
            dropBox.ondragenter = ignoreDrag;
            dropBox.ondragover = ignoreDrag;
            dropBox.ondrop = drop;
        }

        function ignoreDrag(e) {
            //因为我们在处理拖放，所以应该确保没有其他元素会取得这个事件
            e.stopPropagation();
            e.preventDefault();
        }

        function drop(e) {
            //取消事件传播及默认行为
            e.stopPropagation();
            e.preventDefault();

            //取得拖进来的文件
            var data = e.dataTransfer;
            var files = data.files;
            //将其传给真正的处理文件的函数
            processFiles(files);
        }

        function processFiles(files) {
            var file = files[0];
            var output = document.getElementById("fileOutput");
            //创建FileReader
            var reader = new FileReader();
            //告诉它在准备好数据之后做什么
            reader.onload = function (e) {
                //使用图像URL来绘制dropBox的背景
                dropBox.style.backgroundImage = "url('" + e.target.result + "')";
            };
            //读取图片
            reader.readAsDataURL(file);
        }

        function showFileInput() {
            var fileInput = document.getElementById("fileInput");
            fileInput.click();
        }
    </script-->

    <script>
        var dropBox;
        window.onload = function () {
            dropBox = document.getElementById("dropBox");
            dropBox.ondragenter = (e) => {
                //因为我们在处理拖放，所以应该确保没有其他元素会取得这个事件
                e.stopPropagation();
                e.preventDefault();
            };
            dropBox.ondragover = (e) => {
                //因为我们在处理拖放，所以应该确保没有其他元素会取得这个事件
                e.stopPropagation();
                e.preventDefault();
            };
            dropBox.ondrop = (e) => {
                //取消事件传播及默认行为
                e.stopPropagation();
                e.preventDefault();

                //取得拖进来的文件
                var data = e.dataTransfer;
                var files = data.files;
                //将其传给真正的处理文件的函数
                processFiles(files);
            };
        }

        function processFiles(files) {
            var file = files[0];
            var output = document.getElementById("fileOutput");
            //创建FileReader
            var reader = new FileReader();
            //告诉它在准备好数据之后做什么
            reader.onload = function (e) {
                //使用图像URL来绘制dropBox的背景
                dropBox.style.backgroundImage = "url('" + e.target.result + "')";
            };
            //读取图片
            reader.readAsDataURL(file);
        }

        function showFileInput() {
            var fileInput = document.getElementById("fileInput");
            fileInput.click();
        }
    </script>



</head>

<body>
    <div id="dropBox">
        <div>将图片拖放到此处...</div>
    </div>
    <input id="fileInput" type="file" onchange="processFiles(this.files)">
    <img id="thumbnail">
</body>

</html>